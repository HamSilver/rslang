(()=>{"use strict";var e={6829:(e,t,s)=>{s.r(t)},7766:(e,t,s)=>{s.r(t)},2863:(e,t,s)=>{s.r(t)},5032:(e,t,s)=>{s.r(t)},3592:(e,t,s)=>{s.r(t)},2076:(e,t,s)=>{s.r(t)},8481:(e,t,s)=>{s.r(t)},1971:(e,t,s)=>{s.r(t)},8424:(e,t,s)=>{s.r(t)},6999:(e,t,s)=>{s.r(t)},2341:(e,t,s)=>{s.r(t)},3872:(e,t,s)=>{s.r(t)},8906:(e,t,s)=>{s.r(t)},5174:function(e,t,s){var n=this&&this.__awaiter||function(e,t,s,n){return new(s||(s=Promise))((function(i,o){function r(e){try{l(n.next(e))}catch(e){o(e)}}function a(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof s?t:new s((function(e){e(t)}))).then(r,a)}l((n=n.apply(e,t||[])).next())}))},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=s(5296),r=i(s(7555)),a=i(s(6039));t.default=class{constructor(){this.model=new a.default,this.view=new r.default}start(){this.view.create(),this.getUserAuth(),this.view.header.addListeners((()=>this.showAuth())),this.initOnHashChange(),this.initLoginListener(),this.initGameStatListener(),this.initSetDifficultyListener()}showAuth(){const e=document.querySelector(".nav__link_auth");e&&this.model.isRegisteredUser?(e.classList.remove("logged-in"),e.textContent="Войти",this.model.logout(),this.onHashChange()):this.view.authPage.create()}initLoginListener(){document.addEventListener("userLogin",(e=>this.onUserLogin(e)))}initGameStatListener(){document.addEventListener("gameStatistic",(e=>this.onGameStat(e)))}initSetDifficultyListener(){document.addEventListener("setDifficulty",(e=>this.onSetDifficulty(e)))}getUserAuth(){if(localStorage.getItem("userId")){this.model.userState=!0;const e=document.querySelector(".nav__link_auth");e&&(e.classList.add("logged-in"),e.textContent="Выйти",this.onHashChange())}}onSetDifficulty(e){return n(this,void 0,void 0,(function*(){const{id:t,difficulty:s}=e.detail;this.model.isRegisteredUser&&(yield this.model.setWordDifficulty(t,s))}))}onGameStat(e){return n(this,void 0,void 0,(function*(){const t=e.detail;this.model.isRegisteredUser&&this.model.saveStatFromGame(t)}))}runGameFromTxtBk(e,t,s){return n(this,void 0,void 0,(function*(){if(console.log("runGameFromTxtBk"),t>0&&t<7&&+t.toFixed(0)===t){const n=yield this.model.getWordsFromTxtBk(e,t,s),i=e===o.GAME.SPRINT?o.PAGE.PLAYSPRINT:o.PAGE.PLAYAUDIOCALL;n&&this.view.renderPage(i,n)}else window.location.hash="error"}))}runGameFromGames(e,t){return n(this,void 0,void 0,(function*(){if(t>0&&t<7&&+t.toFixed(0)===t){const s=yield this.model.getWordsForGame(e,t),n=e===o.GAME.SPRINT?o.PAGE.PLAYSPRINT:o.PAGE.PLAYAUDIOCALL;s&&this.view.renderPage(n,s)}else window.location.hash="error"}))}onUserLogin(e){return n(this,void 0,void 0,(function*(){const t=e.detail,[s,n]=yield this.model.userLogin(t);if(n&&this.view.authPage.showErrorMsg(n),s){this.view.authPage.closeModal();const e=document.querySelector(".nav__link_auth");e&&(e.classList.add("logged-in"),e.textContent="Выйти",this.onHashChange())}}))}onHashChange(){var e,t;return n(this,void 0,void 0,(function*(){let s=window.location.hash.substring(2);""===s&&(s=o.PAGE.HOME);const n=s.split("/");if(console.log("hashParts",n),n[0]===o.PAGE.TEXTBOOK){let s=+(null!==(e=n[1])&&void 0!==e?e:0);s&&(s-=1);let i=+(null!==(t=n[2])&&void 0!==t?t:0);i&&(i-=1);const[r,a]=yield this.model.getWords({group:s,page:i});a&&console.log(a),r&&this.view.renderPage(o.PAGE.TEXTBOOK,r,this.model.isRegisteredUser,s,i)}else 4===n.length&&n[1]===o.GAME.SPRINT?(console.log("run sprint"),this.runGameFromTxtBk(o.GAME.SPRINT,Number(n[2]),Number(n[3]))):4===n.length&&n[1]===o.GAME.AUDIOCALL?this.runGameFromTxtBk(o.GAME.AUDIOCALL,Number(n[2]),Number(n[3])):3===n.length&&n[1]===o.GAME.SPRINT?this.runGameFromGames(o.GAME.SPRINT,Number(n[2])):3===n.length&&n[1]===o.GAME.AUDIOCALL?this.runGameFromGames(o.GAME.AUDIOCALL,Number(n[2])):this.view.renderPage(s,[],this.model.isRegisteredUser)}))}initOnHashChange(){window.addEventListener("hashchange",(()=>this.onHashChange()))}}},7555:function(e,t,s){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=s(5296);s(6829);const o=n(s(1553)),r=n(s(3579)),a=n(s(8598)),l=n(s(5961)),d=n(s(4922)),u=n(s(4802)),c=n(s(8989)),h=n(s(7559)),f=n(s(7529)),m=n(s(5937));t.default=class{constructor(){this.header=new d.default,this.homePage=new u.default,this.authPage=new o.default,this.gamesPage=new l.default(!1),this.textbookPage=new h.default,this.statisticPage=new c.default,this.errorPage=new r.default,this.footer=new a.default,this.burgerMenu=new f.default,this.gamesChooseLevel=new m.default}renderPage(e,t,s,n,o){const r=document.querySelector("main");switch(r&&"authorization"!==e&&r.remove(),e){case i.PAGE.HOME:this.homePage.create();break;case i.PAGE.TEXTBOOK:this.textbookPage.create(),t&&(this.textbookPage.drawCards(t,null!=s&&s),this.textbookPage.setPagination(null!=n?n:0,null!=o?o:0),this.textbookPage.changeBcgColor(null!=n?n:0));break;case i.PAGE.GAMES:this.gamesPage.create();break;case i.PAGE.PLAYSPRINT:t&&(this.gamesPage.create(),this.gamesPage.drawSprint(t));break;case i.PAGE.PLAYAUDIOCALL:t&&(this.gamesPage.create(),this.gamesPage.drawAudio(t));break;case i.PAGE.GAMESPRINT:this.gamesChooseLevel.draw(i.GAME.SPRINT);break;case i.PAGE.GAMEAUDIOCALL:this.gamesChooseLevel.draw(i.GAME.AUDIOCALL);break;case i.PAGE.STATISTIC:this.statisticPage.create();break;default:this.errorPage.create()}}create(){this.header.create(),this.homePage.create(),this.footer.create(),this.burgerMenu.addListeners()}}},8396:function(e,t,s){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),s(7766);const i=s(5296),o=n(s(2095)),r=n(s(5321)),a=n(s(8749)),l=n(s(3639)),d=s(5359);class u extends o.default{constructor(e){super(e,"div","audiocall"),this.audioIcon=null,this.audioElem=null,this.wordText=null,this.counter=null,this.answerButtonsContainer=null,this.answerBtns=[],this.nextButton=null,this.words=[],this.wordIdx=0,this.indexOfRightAnswer=0,this.counterNumber=i.AUDIOGAME.AMOUNTOFWORDS,this.gameStatus=i.AUDIOGAME.STATUSWAITING,this.rightAnswerSeries=0,this.maxRightAnswerSeries=0,this.percent=0,this.onPressKeyb=()=>{},this.gameContainer=new o.default(this.elem,"div","audio-game-container").elem,this.gameDiv=new o.default(this.gameContainer,"div","audio-game").elem,this.sound={click:new a.default(this.gameDiv,"window__audio audio_click","./assets/audio/click.mp3"),start:new a.default(this.gameDiv,"window__audio audio_start","./assets/audio/start.mp3"),right:new a.default(this.gameDiv,"window__audio audio_right","./assets/audio/right.mp3"),wrong:new a.default(this.gameDiv,"window__audio audio_wrong","./assets/audio/wrong.mp3")},this.drawStartCountdown()}startGame(){var e;new o.default(this.gameDiv,"div","audio-game__close").elem.innerHTML=`<a href="#/games">${(0,l.default)(i.ICON.CLOSE)}</a>`,this.audioIcon=new o.default(this.gameDiv,"div","audio-game__icon").elem,this.audioElem=new a.default(this.audioIcon,"audio-game__sound",`${d.URL}null`),new o.default(this.audioIcon,"div","audio-game__svg").elem.innerHTML=(0,l.default)(i.ICON.SPEAKER),this.wordText=new o.default(this.gameDiv,"div","audio-game__word").elem;const t=new o.default(this.gameDiv,"div","audio-game__counter-wrapper").elem;this.counter=new o.default(t,"div","audio-game__counter").elem,this.answerButtonsContainer=new o.default(this.gameDiv,"div","audio-game__buttons").elem,this.nextButton=new r.default(this.gameDiv,"button","button").elem,this.nextButton.textContent=`${i.AUDIOGAME.SHOWANSWER} (enter)`;for(let t=0;t<i.AUDIOGAME.AMOUNTOFANSWERS;t+=1){const s=new r.default(this.answerButtonsContainer,"button","button-light audio-game__button").elem;s.id=`${t+1}`,null===(e=this.answerBtns)||void 0===e||e.push(s)}this.initAudioListener(this.audioIcon,this.audioElem),this.drawWord(),this.onPressKeyb=e=>this.answerKeyboardHandler(e),this.initKeyboardListeners(),this.initListenersAnswer(),this.initListenerNextBtn()}setWords(e){const t=e.map((e=>e.word));t.sort((()=>Math.random()-.5)),e.length=i.AUDIOGAME.AMOUNTOFWORDS,this.words=e.map(((e,s)=>{const n=e;return n.wrong=Math.round(Math.random())&&e.word!==t[s]?t[s]:void 0,n}))}countdown(e,t,s){const n=e;n.textContent=`${t}`;const i=t-1;setTimeout((()=>{i?this.countdown(e,i,s):(n.remove(),s())}),1e3)}drawStartCountdown(){const e=new o.default(this.gameDiv,"p","window__counter counter_begin").elem;this.sound.start.run(),this.countdown(e,5,(()=>this.startGame()))}drawWord(){this.gameStatus=i.AUDIOGAME.STATUSWAITING,this.counter.textContent=`${this.counterNumber}`,this.counterNumber-=1,this.nextButton.textContent=`${i.AUDIOGAME.SHOWANSWER} (enter)`,this.wordText.innerText="";const e=this.getRandomIndexes();this.wordIdx<this.words.length?(this.audioElem&&(this.audioElem.elem.src=`${d.URL}${this.words[this.wordIdx].audio}`,this.audioElem.run()),this.answerBtns.forEach(((t,s)=>{if(t.disabled=!1,t.classList.remove("correct","incorrect"),s===this.indexOfRightAnswer)t.textContent=`${s+1} ${this.words[this.wordIdx].wordTranslate}`;else{const n=e.pop();t.textContent=`${s+1} ${this.words[n].wordTranslate}`}}))):this.endGame()}getRandomIndexes(){const e=new Set;for(this.indexOfRightAnswer=Math.floor(Math.random()*(i.AUDIOGAME.AMOUNTOFANSWERS-0));e.size<i.AUDIOGAME.AMOUNTOFANSWERS;){const t=Math.floor(Math.random()*(this.words.length-0));t!==this.wordIdx&&e.add(t)}return[...e.keys()]}checkAnswer(e){var t;this.gameStatus=i.AUDIOGAME.STATUSDONE,(null===(t=e.textContent)||void 0===t?void 0:t.split(" ").slice(1).join())===this.words[this.wordIdx].wordTranslate?(this.rightAnswerSeries+=1,this.rightAnswerSeries>this.maxRightAnswerSeries&&(this.maxRightAnswerSeries=this.rightAnswerSeries),e.classList.add("correct"),this.sound.right.run(),this.words[this.wordIdx].answer=!0):(this.rightAnswerSeries=0,e.classList.add("incorrect"),this.answerBtns[this.indexOfRightAnswer].classList.add("correct"),this.sound.wrong.run(),this.words[this.wordIdx].answer=!1),this.answerBtns.forEach((e=>{e.disabled=!0})),1===this.counterNumber?this.nextButton.textContent=`${i.AUDIOGAME.SHOWRESULTS} (enter)`:this.nextButton.textContent=`${i.AUDIOGAME.NEXTWORD} (enter)`,this.wordText.innerText=`${this.words[this.wordIdx].word}`}initListenersAnswer(){var e;null===(e=this.answerBtns)||void 0===e||e.forEach((e=>{e.addEventListener("click",(e=>this.checkAnswer(e.target)))}))}initKeyboardListeners(){window.addEventListener("keyup",this.onPressKeyb)}initListenerNextBtn(){var e;null===(e=this.nextButton)||void 0===e||e.addEventListener("click",this.nextButtonHandler.bind(this))}initAudioListener(e,t){e.addEventListener("click",(()=>t.run()))}answerKeyboardHandler(e){switch(e.preventDefault(),e.key){case i.AUDIOGAME.SPACE:this.audioElem&&this.audioElem.run();break;case i.AUDIOGAME.ENTER:console.log("enter"),this.nextButtonHandler();break;default:this.gameStatus===i.AUDIOGAME.STATUSWAITING&&this.answerBtns.forEach((t=>{const s=t;t.id===e.key&&this.checkAnswer(s)}))}}showCorrectAnswer(){this.gameStatus=i.AUDIOGAME.STATUSDONE,this.answerBtns.forEach((e=>{var t;(null===(t=e.textContent)||void 0===t?void 0:t.split(" ").slice(1).join())===this.words[this.wordIdx].wordTranslate&&e.classList.add("correct"),e.disabled=!0})),1===this.counterNumber?this.nextButton.textContent=`${i.AUDIOGAME.SHOWRESULTS} (enter)`:this.nextButton.textContent=`${i.AUDIOGAME.NEXTWORD} (enter)`}nextButtonHandler(){var e;null===(e=this.nextButton)||void 0===e||e.blur(),this.nextButton.textContent===`${i.AUDIOGAME.SHOWANSWER} (enter)`?(this.rightAnswerSeries=0,this.sound.click.run(),this.wordText.innerText=`${this.words[this.wordIdx].word}`,this.showCorrectAnswer(),this.words[this.wordIdx].answer=!1):(this.wordIdx+=1,this.drawWord())}endGame(){const e=this.words.filter((e=>e.answer)).length,t=this.words.filter((e=>!e.answer)).length,s=e/i.AUDIOGAME.AMOUNTOFWORDS*100;let n;this.percent=s,this.gameDiv.innerHTML="",this.gameDiv.classList.add("nogap");const a=new o.default(this.gameDiv,"div","window__table").elem;window.removeEventListener("keyup",this.onPressKeyb),e&&(n=new o.default(a,"div","table__header header_right",`Правильных ответов: ${e}`).elem,this.words.forEach(((e,t)=>{this.words[t].answer&&this.drawTableRow(a,t,"row_green")}))),t&&(n=new o.default(a,"div","table__header header_wrong",`Неправильных ответов: ${t}`).elem,this.words.forEach(((e,t)=>{this.words[t].answer||this.drawTableRow(a,t,"row_red")})));const l=new r.default(this.gameDiv,"Играть заново","window__btn btn btn_replay").elem;this.dispatchGameStatisticEvent(),this.initReplayListener(l)}dispatchGameStatisticEvent(){const e=i.GAME.AUDIOCALL,t=this.words,s=this.maxRightAnswerSeries,n=this.percent,o=new CustomEvent(i.CUSTOMEVENT.GAMESTATISTIC,{detail:{game:e,words:t,succession:s,percent:n}});document.dispatchEvent(o)}initReplayListener(e){e.addEventListener("click",(()=>{this.sound.click.run();const e=this.words.map((e=>{const t=e;return t.answer=void 0,t.wrong=void 0,t}));this.setWords(e),this.initValues(),this.gameDiv.classList.remove("nogap"),this.drawStartCountdown()}))}initValues(){for(let e=this.gameDiv.childNodes.length-1;e>=0;e-=1)"AUDIO"!==this.gameDiv.childNodes[e].nodeName&&this.gameDiv.childNodes[e].remove();this.wordIdx=0,this.indexOfRightAnswer=0,this.counterNumber=i.AUDIOGAME.AMOUNTOFWORDS,this.answerBtns=[],this.rightAnswerSeries=0,this.maxRightAnswerSeries=0,this.gameStatus=i.AUDIOGAME.STATUSWAITING,this.percent=0}drawTableRow(e,t,s){const n=new o.default(e,"div",`table__row ${s}`).elem,r=new o.default(n,"div","row__audio").elem;r.innerHTML=(0,l.default)(i.ICON.SPEAKER);const u=new a.default(r,"audio__sound",`${d.URL}${this.words[t].audio}`);this.initAudioListener(r,u);let c=new o.default(n,"div","row__word",`${this.words[t].word}`).elem;c=new o.default(n,"div","row__translation",`${this.words[t].wordTranslate}`).elem}}t.default=u},1553:function(e,t,s){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=n(s(2242)),o=n(s(2245));t.default=class{create(){this.modal=new o.default,this.auth=new i.default,this.modal.content.elem.innerHTML=this.auth.renderAuthPage(),this.auth.addListeners()}closeModal(){var e;null===(e=this.modal)||void 0===e||e.destroy()}showErrorMsg(e){var t;null===(t=this.auth)||void 0===t||t.showErrMessage(e)}}},2242:function(e,t,s){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),s(2863);const i=n(s(3761)),o=n(s(2073));t.default=class{constructor(){this.isRegistrationPage=!1}renderAuthPage(){return'\n  <div class="sign-in">\n        <h3 class="form__title" id="form__title">Войти</h3>\n        <form class="sign-in__form form" id="form">\n            <label for="email" class="form__label">Введите E-mail</label>\n            <input type="email" class="form__input" name="email" placeholder="E-mail..." id="form__email" autocomplete="off">\n            <label for="password" class="form__label">Введите пароль</label>\n            <input type="password" class="form__input" name="password" placeholder="Пароль..." id="form__password" autocomplete="off">\n            <div class="form__error-message" id="form__error">Пароль должен содержать не менее 8 символов, как минимум одну заглавную букву, одну прописную букву, одну цифру и один специальный символ "+-_@$!%*?&amp;#.,;:[]{}]</div>\n            <input type="submit" class="button" value="Sign in" id="form__submit">\n        </form>\n        <button class="button button-small" id="form__change-btn">У вас нет аккаунта? Зарегистрируйтесь</button>\n    </div>'}addListeners(){const e=document.getElementById("form");null==e||e.addEventListener("submit",(e=>this.submitForm(e)));const t=document.getElementById("form__change-btn");null==t||t.addEventListener("click",(()=>this.changeFormAuth()))}submitForm(e){e.preventDefault();const t=e.target.elements,s=t[0].value,n=t[1].value,r=document.querySelectorAll(".form__input"),a=document.getElementById("form__error");r.forEach((e=>{e.addEventListener("focusin",(()=>{a.style.display="none"}))})),(0,o.default)(n)||this.showErrMessage('Пароль должен содержать не менее 8 символов, как минимум одну заглавную букву, одну прописную букву, одну цифру и один специальный символ "+-_@$!%*?&amp;#.,;:[]{}]'),(0,i.default)(s)||this.showErrMessage("Некорректный E-mail"),(0,i.default)(s)&&(0,o.default)(n)&&(this.isRegistrationPage?this.dispatchLoginEvent({email:s,password:n,create:!0}):this.dispatchLoginEvent({email:s,password:n,create:!1}))}dispatchLoginEvent(e){const{email:t,password:s,create:n}=e,i=new CustomEvent("userLogin",{detail:{email:t,password:s,create:n}});document.dispatchEvent(i)}changeFormAuth(){document.getElementById("form__error").style.display="none",this.isRegistrationPage=!this.isRegistrationPage;const e=document.getElementById("form__title"),t=document.getElementById("form__submit"),s=document.getElementById("form__change-btn");this.isRegistrationPage?(e.innerText="Регистрация",t.value="Зарегистрироваться",s.innerText="У вас есть аккаунт? Войдите"):(e.innerText="Авторизация",t.value="Войти",s.innerText="У вас нет аккаунта? Зарегистрируйтесь")}showErrMessage(e){const t=document.getElementById("form__error");t.innerText=e,t.style.display="block"}}},4110:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{constructor(e,t,s){this.container=document.createElement(e);let n=[];/\s/.test(t)&&(n=t.split(" ")),this.container.classList.add(...n.length?n:[t]),this.container.id=s}create(){const e=document.querySelector("header");e&&e.after(this.container),this.container.innerHTML=this.inner}}},6453:function(e,t,s){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),s(5032);const i=s(5359),o=n(s(6325)),r=n(s(2095)),a=s(5296),l=n(s(5321)),d=n(s(8749)),u=n(s(3639));class c extends r.default{constructor(e,t,s){var n,u;let c="";s&&(c=`${t.difficulty===a.DIFFICULTY.HARD?" difficult":""}${t.difficulty===a.DIFFICULTY.LEARN?" studied":""}`),super(e,"div",`card${c}`),this.btnDifficult=null,this.btnLearn=null,this.word=t;const h=new r.default(this.elem,"div","card__img-wrapper");let f=new o.default(h.elem,"card__img",`${i.URL}${t.image}`,t.word);const m=new r.default(this.elem,"div","card__content"),_=new r.default(m.elem,"div","card__item word-content"),g=new r.default(_.elem,"div","word-content__word-wrapper word-wrapper");f=new r.default(g.elem,"span","word-wrapper__word",t.word),f=new r.default(g.elem,"span","word-wrapper__transcription",t.transcription),f=new r.default(_.elem,"div","word-content__translation",t.wordTranslate),this.speaker=new r.default(_.elem,"div","word-content__audio-block"),this.speaker.elem.innerHTML=this.speakerSVG(),this.allAudio=[],this.allAudio.push(new d.default(this.speaker.elem,"audio-block__audio",`${i.URL}${t.audio}`)),this.allAudio.push(new d.default(this.speaker.elem,"audio-block__audio",`${i.URL}${t.audioMeaning}`)),this.allAudio.push(new d.default(this.speaker.elem,"audio-block__audio",`${i.URL}${t.audioExample}`));const v=new r.default(m.elem,"div","card__item meaning");f=new r.default(v.elem,"div","meaning__en",t.textMeaning),f=new r.default(v.elem,"div","meaning__ru",t.textMeaningTranslate);const w=new r.default(m.elem,"div","card__item example");if(f=new r.default(w.elem,"div","example__en",t.textExample),f=new r.default(w.elem,"div","example__ru",t.textExampleTranslate),s){const e=new r.default(m.elem,"div","card__item card-btns-progress"),s=new r.default(e.elem,"div","card-btns");this.btnDifficult=new l.default(s.elem,"Сложное","btn btn-difficult"+(t.difficulty===a.DIFFICULTY.HARD?" btn--yellow":"")).elem,this.btnLearn=new l.default(s.elem,"Изученное","btn btn-studied"+(t.difficulty===a.DIFFICULTY.LEARN?" btn--yellow":"")).elem,this.addBtnListeners();const i=new r.default(e.elem,"div","progress");f=new r.default(i.elem,"div","progress__wins",`Угадано: ${null!==(n=t.wins)&&void 0!==n?n:0}`),f=new r.default(i.elem,"div","progress__fails",`Ошибки: ${null!==(u=t.fails)&&void 0!==u?u:0}`)}else this.isPlaying=!1;this.audioId=0,this.isPlaying=!1,this.addSpeakerClickListener()}addBtnListeners(){var e,t;null===(e=this.btnDifficult)||void 0===e||e.addEventListener("click",(()=>this.dispatchClickOnBtns(a.DIFFICULTY.HARD))),null===(t=this.btnLearn)||void 0===t||t.addEventListener("click",(()=>this.dispatchClickOnBtns(a.DIFFICULTY.LEARN)))}dispatchClickOnBtns(e){var t,s,n,i;const{id:o}=this.word,r=this.word.difficulty===e?a.DIFFICULTY.NONE:e,l=new CustomEvent("setDifficulty",{detail:{id:o,difficulty:r}});r===a.DIFFICULTY.HARD?null===(t=this.btnDifficult)||void 0===t||t.classList.add("btn--yellow"):null===(s=this.btnDifficult)||void 0===s||s.classList.remove("btn--yellow"),r===a.DIFFICULTY.LEARN?null===(n=this.btnLearn)||void 0===n||n.classList.add("btn--yellow"):null===(i=this.btnLearn)||void 0===i||i.classList.remove("btn--yellow"),document.dispatchEvent(l)}addSpeakerClickListener(){this.speaker.elem.addEventListener("click",(()=>this.audioPlay()))}audioPlay(){this.isPlaying||(this.isPlaying=!0,this.allAudio[this.audioId].elem.addEventListener("ended",(()=>this.audioPrepareNext()),{once:!0}),this.allAudio[this.audioId].run())}audioPrepareNext(){this.isPlaying=!1,this.audioId=2===this.audioId?0:this.audioId+1}removeSpeakerClickListener(){this.speaker.elem.removeEventListener("click",(()=>this.audioPlay()))}speakerSVG(){return(0,u.default)(a.ICON.SPEAKER)}}t.default=c},3579:function(e,t,s){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),s(3592);const i=n(s(4110));class o extends i.default{constructor(){super("main","main","error"),this.inner='<div class="container error-page">\n              <h2 class="error-page__title">Страница не найдена!</h2>\n            </div>'}}t.default=o},8598:function(e,t,s){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),s(2076);const i=n(s(4110));class o extends i.default{constructor(){super("footer","footer","footer"),this.inner='\n        <div class="container footer__container">\n          <a class="rs__link" href="https://rs.school/js/" target="_blank" rel="noopener noreferrer">\n            <img src="./assets/icons/rsschool.svg" alt="RSSchool" class="rs__logo">\n          </a>\n          <div class="github">\n            <a class="github__link" href="https://github.com/HamSilver" target="_blank" rel="noopener noreferrer">HamSilver</a>\n            <a class="github__link" href="https://github.com/UiguunaMikhailova" target="_blank" rel="noopener noreferrer">UiguunaMikhailova</a>\n            <a class="github__link" href="https://github.com/KristiBo" target="_blank" rel="noopener noreferrer">KristiBo</a>\n          </div>\n          <span class="year">© 2022</span>\n        </div>'}create(){document.body.append(this.container),this.container.innerHTML=this.inner}}t.default=o},5937:function(e,t,s){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),s(8481);const i=n(s(4110)),o=s(5296),r=n(s(2095)),a=n(s(2430));class l extends i.default{constructor(){super("main","main main-game","games"),this.inner=""}draw(e){this.create();let t=new r.default(this.container,"h2","main-game__title",e===o.GAME.SPRINT?"Спринт":"Аудиовызов");t=new r.default(this.container,"div","game__info",this.getGameInfo(e)),t=new r.default(this.container,"div","game__lvl-header","Выберите уровень сложности:");const s=new r.default(this.container,"div","game__lvl-content").elem;for(let n=1;n<7;n+=1)t=new a.default(s,`lvl-content__link game__btn lvl-btn link_${n}`,`#/${o.PAGE.GAMES}/${e}/${n}`,`${n}`)}getGameInfo(e){let t="";switch(e){case o.GAME.SPRINT:t="\n        Тренирует навык быстрого перевода с английского языка на русский.\n        Вам нужно выбрать, соответствует ли перевод предложенному слову.\n        Для управления можно использовать мышь или стрелки влево/вправо на клавиатуре\n        ";break;case o.GAME.AUDIOCALL:t="<p>«Аудиовызов» - это тренировка, которая улучшает восприятие речи на слух.</p>\n        <p>Для управления можно использовать мышь или клавиатуру:</p>\n        <p>1) клавиши от 1 до 5 для выбора ответа</p>\n        <p>2) пробел для повторного звучания слова</p>\n        <p>3) Enter для подсказки или для перехода к следующему слову</p>\n        "}return t}}t.default=l},5961:function(e,t,s){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),s(1971);const i=n(s(4110)),o=n(s(4497)),r=n(s(8396));class a extends i.default{constructor(e){super("main","main","games"),this.userState=!1,this.inner='<div class="games-page">        \n        <h2 class="games-page__title">Выберите игру:</h2>\n        <div class="games-page__cards">\n        <div class="games-page__card">\n          <img src="./assets/icons/audiochallenge.png" alt="audio-game" class="game-card__img">\n          <p class="game-card__name">Аудиовызов</p>\n          <p class="game-description">Проверьте свои навыки аудирования, пытаясь определить правильное слово по его произношению</p>\n          <a class="game__btn btn btn_audiocall" id="btn-audiocall" href="#/games/audiocall">Играть</a>\n        </div>\n        <div class="games-page__card">\n          <img src="./assets/icons/sprint.png" alt="sprint-game" class="game-card__img">\n          <p class="game-card__name">Спринт</p>\n          <p class="game-description">Проверьте, сколько очков вы cможете набрать за одну минуту, пытаясь определить перевод слова</p>\n          <a class="game__btn btn btn_sprint" id="btn-sprint" href="#/games/sprint">Играть</a>\n        </div>\n        </div>\n      </div>\n      <div class="game__container"></div>',this.userState=e}drawSprint(e){this.container.innerHTML="",new o.default(this.container).setWords(e)}drawAudio(e){this.container.innerHTML="",new r.default(this.container).setWords(e)}}t.default=a},7529:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{addListeners(){const e=document.querySelector(".burger-menu"),t=document.querySelectorAll(".nav__link");e&&e.addEventListener("click",this.open),t.forEach((e=>e.addEventListener("click",this.close)))}open(){const e=document.querySelector(".burger-menu"),t=document.querySelector(".nav");document.body.classList.toggle("lock"),e&&t&&(e.classList.toggle("open"),t.classList.toggle("open"))}close(){const e=document.querySelector(".burger-menu"),t=document.querySelector(".nav");document.body.classList.remove("lock"),e&&t&&(e.classList.remove("open"),t.classList.remove("open"))}}},4922:function(e,t,s){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),s(8424);const i=n(s(4110));class o extends i.default{constructor(){super("header","header","header-container"),this.inner='\n        <div class="container header__container">\n          <div class="header__logo logo">\n            <a href="#/home" class="logo__link">\n              <img src="./assets/icons/logo.png" alt="logo" class="logo__img">\n            </a>          \n            <h1 class="logo__title">RS Lang</h1>\n          </div>\n          <nav class="nav">\n            <ul class="nav__list">\n              <li class="nav__item">\n                <a href="#/home" class="nav__link nav__link_home active">Главная</a>\n              </li>\n              <li class="nav__item">\n                <a href="#/textbook" class="nav__link nav__link_book">Учебник</a>\n              </li>\n              <li class="nav__item">\n                <a href="#/games" class="nav__link nav__link_games">Игры</a>\n              </li>\n              <li class="nav__item">\n                <a href="#/statistic" class="nav__link nav__link_statistic">Статистика</a>\n              </li>\n              <li class="nav__item">\n                <a href="#/authorization" class="nav__link header__button nav__link_auth">Войти</a>\n              </li>\n            </ul>\n          </nav>\n          <div class="burger-menu">\n            <span></span>\n          </div>\n        </div>'}create(){document.body.append(this.container),this.container.innerHTML=this.inner}addListeners(e){const t=document.querySelectorAll(".nav__link");t.forEach((s=>s.addEventListener("click",(n=>{n.target.classList.contains("nav__link_auth")&&e&&(n.preventDefault(),e()),t.forEach((e=>e.classList.remove("active"))),s.classList.add("active")}))))}}t.default=o},4802:function(e,t,s){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),s(6999);const i=n(s(4110));class o extends i.default{constructor(){super("main","main","home"),this.inner='\n        <div class="container homepage">\n          <section class="section about">\n            <div class="about__description">\n              <h3 class="about__title">Выучить английский легко!</h3>\n              <p class="about__text">\n                RS Lang - это ваш помощник в изучении английского языка. Изучите 3600 часто употребляемых слов с помощью учебника и мини-игр, отслеживайте свой прогресс в разделе "Статистика". Регистрируйтесь и открывайте дополнительные возможности приложения!\n              </p>\n            </div>\n            <div class="about__image">\n              <img src="./assets/img/main.jpg" alt="" class="home__img">\n            </div>\n          </section>\n          <section class="section advantages">\n            <div class="advantages__card">\n              <img src="./assets/icons/book.png" alt="textbook" class="advantages__img">\n              <h3 class="advantages__title">Учебник</h3>\n              <p class="advantages__text">Учебник состоит из шести разделов, в каждом разделе 30 страниц по 20 слов. Представлен перевод слова, транскрипция, картинка-ассоциация, а также произношение слова и предложений с ним.</p>\n            </div>\n            <div class="advantages__card">\n              <img src="./assets/icons/games.png" alt="game" class="advantages__img">\n              <h3 class="advantages__title">Мини-игры</h3>\n              <p class="advantages__text">В нашем приложении доступны 2 мини-игры: "Аудиовызов" и "Спринт". Ваше обучение будет проходить эффективнее и веселее. С игровым подходом ежедневные занятия входят в привычку.</p>\n            </div>\n            <div class="advantages__card">\n              <img src="./assets/icons/statistic.png" alt="statistic" class="advantages__img">\n              <h3 class="advantages__title">Статистика</h3>\n              <p class="advantages__text">Вам доступна краткосрочная статистика по мини-играм и по словам за каждый день изучения: количество новых слов, количество изученных слов, самая длинная серия правильных ответов, процент правильных ответов.</p>\n            </div>\n          </section>\n          <section class="section video">\n            <h2 class="video__section-title">Возможности приложения (будет видео)</h2>            \n          </section>\n          <section class="section team">\n            <h2 class="team__section-title">Наша команда</h2>\n            <div class="team__cards">\n              <div class="team__card">\n                <img src="./assets/img/avatar-stas.jpg" alt="avatar" class="team__card-img">\n                <div class="team__card-description">\n                  <a class="team__card-link" href="https://github.com/HamSilver" target="_blank" rel="noopener noreferrer">Cтанислав</a>            \n                  <span class="team__card-role">Тимлид</span>\n                  <p class="team__card-text">Настройка бэкенда, разработка архитектуры приложения, карточек слов, мини-игры "Спринт", статистики и части учебника</p>\n                </div>\n              </div>\n              <div class="team__card">\n                <img src="./assets/img/avatar-uiguuna.jpg" alt="avatar" class="team__card-img">\n                <div class="team__card-description">\n                  <a class="team__card-link" href="https://github.com/UiguunaMikhailova" target="_blank" rel="noopener noreferrer">Уйгууна</a>\n                  <span class="team__card-role">Разработчик</span>\n                  <p class="team__card-text">Реализация авторизации и регистрации пользователя, разработка мини-игры "Аудиовызов"</p>\n                </div>\n              </div>\n              <div class="team__card">\n                <img src="./assets/img/avatar-kris.jpg" alt="avatar" class="team__card-img">\n                <div class="team__card-description">\n                  <a class="team__card-link" href="https://github.com/KristiBo" target="_blank" rel="noopener noreferrer">Кристина</a>\n                  <span class="team__card-role">Разработчик</span>\n                  <p class="team__card-text">Реализация роутинга, главной страницы приложения с header и footer, части учебника, адаптивный дизайн приложения</p>\n                </div>\n              </div>\n            </div>\n          </section>\n        </div>'}}t.default=o},2245:function(e,t,s){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),s(2341);const i=n(s(2095));class o extends i.default{constructor(e=""){super(document.body,"div",e),this.elem.classList.add("modal__shadow"),this.content=new i.default(this.elem,"div","modal__window"),document.body.classList.add("stop-scrolling"),this.initListeners()}destroy(){this.elem.removeEventListener("click",(e=>this.onClick(e))),window.removeEventListener("keyup",(e=>this.onEscPress(e))),document.body.classList.remove("stop-scrolling"),this.elem.remove()}initListeners(){this.elem.addEventListener("click",(e=>this.onClick(e))),window.addEventListener("keyup",(e=>this.onEscPress(e)))}onClick(e){const{classList:t}=e.target;t.contains("modal__shadow")&&this.destroy()}onEscPress(e){"Escape"===e.key&&this.destroy()}}t.default=o},6039:function(e,t,s){var n=this&&this.__awaiter||function(e,t,s,n){return new(s||(s=Promise))((function(i,o){function r(e){try{l(n.next(e))}catch(e){o(e)}}function a(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof s?t:new s((function(e){e(t)}))).then(r,a)}l((n=n.apply(e,t||[])).next())}))},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=s(5296),r=i(s(4896));t.default=class{constructor(){this.userState=!1,this.api=new r.default}userLogin(e){return n(this,void 0,void 0,(function*(){const{email:t,password:s}=e;if(s){if(e.create){const[e,n]=yield this.api.createUser({email:t,password:s});if(n)return[!1,n.message]}const[n,i]=yield this.api.signin(t,s);if(i)return[!1,i.message];if(n)return this.setToLocalStorage(n),[!0,""]}return[!1,"Empty password"]}))}setWordDifficulty(e,t){return n(this,void 0,void 0,(function*(){const[s,n]=yield this.api.getUsersWordById(e);if(n&&console.log(n),s){const[s,n]=yield this.api.updateUsersWord(e,{difficulty:t});n&&console.log(n)}else{const[s,n]=yield this.api.postUsersWord(e,{difficulty:t});n&&console.log(n)}t===o.DIFFICULTY.LEARN&&(null==s?void 0:s.difficulty)!==o.DIFFICULTY.LEARN&&this.updateStatistic({t:1}),t!==o.DIFFICULTY.LEARN&&(null==s?void 0:s.difficulty)===o.DIFFICULTY.LEARN&&this.updateStatistic({t:-1})}))}getWords(e){return n(this,void 0,void 0,(function*(){const{group:t,page:s}=e;let n=[],i=null;if(6===t){const e="_id",t='{"userWord.difficulty":"hard"}',s="3600",[r,a]=yield this.api.getUsrAggrWords({wordsPerPage:s,filter:t});a&&(i=a),r&&(null==r?void 0:r[0].paginatedResults)&&r[0].paginatedResults.length>0&&r[0].paginatedResults.forEach((t=>{var s;const i=t;i.id=i[e];let r=i;r.difficulty=i.userWord?i.userWord.difficulty:o.DIFFICULTY.NONE,r.wins=0,r.fails=0,(null===(s=i.userWord)||void 0===s?void 0:s.optional)&&(r=Object.values(i.userWord.optional).reduce(((e,t)=>(e.wins=t.wins,e.fails=t.fails,e)),r)),n.push(r)}))}else{const[e,r]=yield this.api.getWords(t,s);if(r&&(i=r),e){let[t,s]=[[],null];this.userState&&([t,s]=yield this.api.getUsersWords()),s&&(i=s),n=e.map((e=>{const s=null==t?void 0:t.find((t=>t.wordId===e.id));let n=e;return n.difficulty=s?s.difficulty:o.DIFFICULTY.NONE,n.wins=0,n.fails=0,(null==s?void 0:s.optional)&&(n=Object.values(s.optional).reduce(((e,t)=>(e.wins=t.wins,e.fails=t.fails,e)),n)),n}))}}return[n,i]}))}getWordsForGame(e,t){return n(this,void 0,void 0,(function*(){const s=[],i=t-1,r=[...Array(30)].map(((e,t)=>t)).sort((()=>Math.random()-.5));r.length=e===o.GAME.AUDIOCALL?1:3;const a=r.map((e=>n(this,void 0,void 0,(function*(){const[t,n]=yield this.api.getWords(i,e);n&&console.log(n),t&&s.push(...t)}))));return yield Promise.all(a),s}))}getStatistic(){return n(this,void 0,void 0,(function*(){const[e,t]=yield this.api.getUsersStats();return t&&console.log(t),e}))}updateStatistic(e){var t,s;return n(this,void 0,void 0,(function*(){const n=(new Date).toDateString().slice(4),i=[e],[o,r]=yield this.api.getUsersStats();r&&console.log(r),(null==o?void 0:o.optional)&&i.push(o.optional[n]);const a=(e=>{const t={t:0,s:[0,0,0,0],a:[0,0,0,0]};return e.forEach((e=>{e.t&&(t.t+=e.t),e.s&&e.s.forEach(((e,s)=>{s<3?t.s[s]+=e:t.s[s]=Math.max(e,t.s[s])})),e.a&&e.a.forEach(((e,s)=>{s<3?t.a[s]+=e:t.a[s]=Math.max(e,t.s[s])}))})),t})(i);let l=null!==(t=null==o?void 0:o.learnedWords)&&void 0!==t?t:0;l+=null!==(s=e.t)&&void 0!==s?s:0;const[d,u]=yield this.api.updateUsersStats({learnedWords:l,optional:{[n]:a}});u&&console.log(u)}))}getWordsFromTxtBk(e,t,s){return n(this,void 0,void 0,(function*(){const i=""+(t-1),r=""+(s-1);let a=`{"$and":[{"userWord.difficulty":{"$ne":"learn"}},{"page": ${r}}]}`;const l=[];if(this.userState){let t="20";const s=e===o.GAME.SPRINT?60:20,[n,d]=yield this.api.getUsrAggrWords({group:i,wordsPerPage:t,filter:a});if(d&&console.log(d),(null==n?void 0:n[0].paginatedResults)&&n[0].paginatedResults.length>0&&n[0].paginatedResults.forEach((e=>{const t=e;t.id=t._id,l.push(t)})),l.length<s&&r){t=""+(s-l.length),a=`{"$and":[{"userWord.difficulty":{"$ne":"learn"}},{"page":{"$lt": ${r}}}]}`;const[e,n]=yield this.api.getUsrAggrWords({group:i,wordsPerPage:t,filter:a});n&&console.log(d),(null==e?void 0:e[0].paginatedResults)&&e[0].paginatedResults.length>0&&e[0].paginatedResults.forEach((e=>{const t=e;t.id=t._id,l.push(t)}))}}else{let i=[0,1,2];e===o.GAME.AUDIOCALL?i=[s-1]:s<4?i.length=s:(i=[...Array(s-1)].map(((e,t)=>t)).sort((()=>Math.random()-.5)),i.length=2,i.push(s-1));const r=i.map((e=>n(this,void 0,void 0,(function*(){const[s,n]=yield this.api.getWords(t-1,e);n&&console.log(n),s&&l.push(...s)}))));yield Promise.all(r)}return l}))}saveStatFromGame(e){return n(this,void 0,void 0,(function*(){const[t,s]=yield this.api.getUsersWords(),i={t:0,s:[0,0,0,0],a:[0,0,0,0]},r={wins:0,fails:0,count:0};let a=0;if(s)throw new Error("Error occured while getting users words");const l=e.words.map((s=>n(this,void 0,void 0,(function*(){const n=null==t?void 0:t.find((e=>e.wordId===s.id));if(n){const{difficulty:t,optional:a}=n,l={difficulty:t,optional:a};if(l.optional&&!l.optional[e.game]&&(l.optional[e.game]=r),l.optional&&l.optional[e.game]){s.answer?(l.optional[e.game].wins+=1,l.optional[e.game].count+=1):(l.optional[e.game].fails+=1,l.optional[e.game].count=0,l.difficulty===o.DIFFICULTY.LEARN&&(l.difficulty=o.DIFFICULTY.NONE));const t=l.difficulty===o.DIFFICULTY.NEW||l.difficulty===o.DIFFICULTY.NONE?o.WINSNEEDED.NEW:o.WINSNEEDED.HARD;l.optional[e.game].count>=t&&(l.difficulty=o.DIFFICULTY.LEARN,i.t+=1);const[n,r]=yield this.api.updateUsersWord(s.id,l);r&&console.log(r)}}else{r.count=1,s.answer?r.wins=1:r.fails=1;const[t,n]=yield this.api.postUsersWord(s.id,{difficulty:o.DIFFICULTY.NEW,optional:{[e.game]:r}});a+=1,n&&console.log(n)}}))));yield Promise.all(l);const d=e.words.reduce(((e,t)=>e+(t.answer?1:0)),0),u=[a,d,e.words.length,e.succession];e.game===o.GAME.SPRINT?i.s=u:i.a=u,this.updateStatistic(i)}))}setToLocalStorage(e){this.userState=!0;const t=new Date;localStorage.setItem("time",JSON.stringify(t)),localStorage.setItem("token",JSON.stringify(e.token)),localStorage.setItem("userId",JSON.stringify(e.userId)),localStorage.setItem("refreshToken",JSON.stringify(e.refreshToken))}logout(){this.userState=!1,this.api.setExpire(0),this.api.setUserId(""),this.api.setToken(""),localStorage.setItem("time",""),localStorage.setItem("token",""),localStorage.setItem("userId",""),localStorage.setItem("refreshToken","")}get isRegisteredUser(){return this.userState}set isRegisteredUser(e){}}},4497:function(e,t,s){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),s(3872);const i=s(5296),o=n(s(2095)),r=n(s(5321)),a=n(s(8749)),l=n(s(3639)),d=s(5359);class u extends o.default{constructor(e){super(e,"div","sprint"),this.wordDiv=null,this.translateDiv=null,this.counter=null,this.score=0,this.scoreDiv=null,this.questionDiv=null,this.btns={self:null,left:null,right:null},this.words=[],this.wordIdx=0,this.rightAnswers=0,this.wrongAnswers=0,this.isGameNotOver=!0,this.succession=0,this.maxSuccession=0,this.gameDiv=new o.default(this.elem,"div","game__window modal__window").elem,this.onClickLeft=()=>{},this.onClickRight=()=>{},this.onPressKeyb=()=>{},this.sound={click:new a.default(this.gameDiv,"window__audio audio_click","./assets/audio/click.mp3"),start:new a.default(this.gameDiv,"window__audio audio_start","./assets/audio/start.mp3"),right:new a.default(this.gameDiv,"window__audio audio_right","./assets/audio/right.mp3"),wrong:new a.default(this.gameDiv,"window__audio audio_wrong","./assets/audio/wrong.mp3"),end:new a.default(this.gameDiv,"window__audio audio_end","./assets/audio/end.mp3")},this.drawStartCountdown()}countdown(e,t,s){const n=e;n.textContent=`${t}`;const i=t-1;setTimeout((()=>{i?this.countdown(e,i,s):(n.remove(),s())}),1e3)}progressRing(e,t=0){const s=t+6;setTimeout((()=>{t<348?(new o.default(e,"div","progress__dot").elem.style.transform=`translateY(-1.5rem) rotate(${t}deg)`,this.progressRing(e,s)):e.remove()}),1e3)}initValues(){for(let e=this.gameDiv.childNodes.length-1;e>=0;e-=1)"AUDIO"!==this.gameDiv.childNodes[e].nodeName&&this.gameDiv.childNodes[e].remove();this.wordIdx=0,this.rightAnswers=0,this.wrongAnswers=0,this.score=0,this.isGameNotOver=!0,this.succession=0,this.maxSuccession=0}drawStartCountdown(){const e=new o.default(this.gameDiv,"p","window__counter counter_begin").elem;this.sound.start.run(),this.countdown(e,5,(()=>this.startGame()))}drawWord(){var e;if(this.wordIdx<this.words.length&&this.isGameNotOver){this.wordDiv&&(this.wordDiv.textContent=this.words[this.wordIdx].word);const t=null!==(e=this.words[this.wordIdx].wrong)&&void 0!==e?e:this.words[this.wordIdx].wordTranslate;this.translateDiv&&(this.translateDiv.textContent=t)}else this.endGame()}startGame(){this.scoreDiv=new o.default(this.gameDiv,"div","window__score").elem;const e=new o.default(this.gameDiv,"div","window__word-block").elem;this.wordDiv=new o.default(e,"div","window__word").elem,new o.default(e,"div","window__equal","➜").elem,this.translateDiv=new o.default(e,"div","window__translate").elem,this.questionDiv=new o.default(this.gameDiv,"div","window__question","Это правильный перевод?").elem,this.btns.self=new o.default(this.gameDiv,"div","window__btns").elem,this.btns.left=new r.default(this.btns.self,"🠔 Нет","window__btn btn btn_left").elem,this.btns.right=new r.default(this.btns.self,"Да ➝","window__btn btn btn_right").elem;const t=new o.default(this.gameDiv,"div","window__counter counter_wrapper").elem;this.counter=new o.default(t,"div","window__counter counter_game").elem,this.progressRing(t),this.countdown(this.counter,59,(()=>this.setGameOver())),this.drawWord(),this.updateScore(),this.btns.left&&(this.onClickLeft=()=>this.onClick(this.btns.left)),this.btns.right&&(this.onClickRight=()=>this.onClick(this.btns.right)),this.onPressKeyb=e=>this.onKeyPress(e),this.initListeners()}initListeners(){const{left:e}=this.btns;e&&e.addEventListener("click",this.onClickLeft);const{right:t}=this.btns;t&&t.addEventListener("click",this.onClickRight),window.addEventListener("keyup",this.onPressKeyb)}removeListeners(){const{left:e}=this.btns;e&&e.removeEventListener("click",this.onClickLeft);const{right:t}=this.btns;t&&t.removeEventListener("click",this.onClickRight),window.removeEventListener("keyup",this.onPressKeyb)}setGameOver(){this.isGameNotOver=!1}updateScore(){this.scoreDiv&&(this.scoreDiv.textContent=`${this.score}`)}endGame(){var e,t,s,n,i,a;let l;this.sound.end.run(),this.counter&&(null===(e=this.counter.parentElement)||void 0===e||e.remove()),this.removeListeners(),null===(t=this.btns.self)||void 0===t||t.remove(),null===(s=this.scoreDiv)||void 0===s||s.remove(),null===(i=null===(n=this.wordDiv)||void 0===n?void 0:n.parentElement)||void 0===i||i.remove(),null===(a=this.questionDiv)||void 0===a||a.remove(),this.gameDiv.classList.add("nogap"),l=new o.default(this.gameDiv,"div","window__header",`Твой результат: <span>${this.score}</span> баллов`).elem;const d=new o.default(this.gameDiv,"div","window__table").elem;this.rightAnswers&&(l=new o.default(d,"div","table__header header_right",`Правильных ответов: ${this.rightAnswers}`).elem,this.words.forEach((e=>{e.answer&&this.drawTableRow(d,e,"row_green")}))),this.wrongAnswers&&(l=new o.default(d,"div","table__header header_wrong",`Неправильных ответов: ${this.wrongAnswers}`).elem,this.words.forEach((e=>{!1===e.answer&&this.drawTableRow(d,e,"row_red")})));const u=new r.default(this.gameDiv,"Играть заново","window__btn btn btn_replay").elem;this.dispatchGameStatisticEvent(),this.initReplayListener(u)}dispatchGameStatisticEvent(){const e=i.GAME.SPRINT,t=this.words.filter((e=>void 0!==e.answer)),s=this.maxSuccession,n=new CustomEvent("gameStatistic",{detail:{game:e,words:t,succession:s}});document.dispatchEvent(n)}drawTableRow(e,t,s){const n=new o.default(e,"div",`table__row ${s}`).elem,r=new o.default(n,"div","row__audio").elem;r.innerHTML=(0,l.default)(i.ICON.SPEAKER);const u=new a.default(r,"audio__sound",`${d.URL}${t.audio}`);this.initAudioListener(r,u);let c=new o.default(n,"div","row__word",`${t.word}`).elem;c=new o.default(n,"div","row__translation",`${t.wordTranslate}`).elem}initAudioListener(e,t){e.addEventListener("click",(()=>t.run()))}initReplayListener(e){e.addEventListener("click",(()=>{this.sound.click.run();const e=this.words.map((e=>{const t=e;return t.answer=void 0,t.wrong=void 0,t}));this.setWords(e),this.initValues(),this.gameDiv.classList.remove("nogap"),this.drawStartCountdown()}))}processAnswer(e){const t=this.words[this.wordIdx].wrong?i.ANSWER.WRONG:i.ANSWER.RIGHT;this.words[this.wordIdx].answer=e===t;const s=this.words[this.wordIdx].answer?"green-shadow":"red-shadow";this.words[this.wordIdx].answer?(this.succession+=1,this.maxSuccession<this.succession&&(this.maxSuccession=this.succession),this.sound.right.run(),this.rightAnswers+=1,this.rightAnswers<4?this.score+=10:this.rightAnswers<7?this.score+=20:this.rightAnswers<10?this.score+=40:this.score+=80,this.updateScore()):(this.succession=0,this.sound.wrong.run(),this.wrongAnswers+=1),this.gameDiv.classList.add(s),setTimeout((()=>{this.gameDiv.classList.remove(s)}),150),this.wordIdx+=1,this.drawWord()}onClick(e){const{classList:t}=e;t.contains("btn_left")&&this.processAnswer(i.ANSWER.WRONG),t.contains("btn_right")&&this.processAnswer(i.ANSWER.RIGHT)}animateClick(e){e.classList.add("soft-click"),setTimeout((()=>{e.classList.remove("soft-click")}),150)}onKeyPress(e){"ArrowLeft"===e.key&&this.btns.left&&(this.animateClick(this.btns.left),this.btns.left.click()),"ArrowRight"===e.key&&this.btns.right&&(this.animateClick(this.btns.right),this.btns.right.click())}setWords(e){const t=e.map((e=>e.wordTranslate));t.sort((()=>Math.random()-.5)),this.words=e.map(((e,s)=>{const n=e;return n.wrong=Math.round(Math.random())&&e.wordTranslate!==t[s]?t[s]:void 0,n}))}}t.default=u},8989:function(e,t,s){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=n(s(4110));class o extends i.default{constructor(){super("main","main","statistic"),this.inner='<h2 class="main__title">Статистика</h2>'}}t.default=o},7559:function(e,t,s){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),s(8906);const i=s(5296),o=n(s(4110)),r=n(s(6453)),a=s(5359);class l extends o.default{constructor(){super("main","main main-textbook","textbook"),this.inner='\n        <div class="container textbook">\n        <div class="textbook__games">\n            <a href="#/games/audiocall" class="game-card game-card_audio">\n              <img src="./assets/icons/audiochallenge.png" alt="audio-game" class="game-card__img">\n              <span class="game-card__name">Аудиовызов</span>\n            </a>\n            <a href="#/games/sprint" class="game-card game-card_sprint">\n              <img src="./assets/icons/sprint.png" alt="sprint-game" class="game-card__img">\n              <span class="game-card__name">Спринт</span>\n            </a>\n          </div>\n          <div class="textbook__level">\n            <h3 class="textbook__level-title">Выберите  уровень сложности:</h3>\n            <div class="textbook__level-buttons">\n              <a class="textbook__button button_level button_level-1" href="#/textbook/1">1</a>\n              <a class="textbook__button button_level button_level-2" href="#/textbook/2">2</a>\n              <a class="textbook__button button_level button_level-3" href="#/textbook/3">3</a>\n              <a class="textbook__button button_level button_level-4" href="#/textbook/4">4</a>\n              <a class="textbook__button button_level button_level-5" href="#/textbook/5">5</a>\n              <a class="textbook__button button_level button_level-6" href="#/textbook/6">6</a>\n              <a class="textbook__button button_level button_difficult hide" href="#/textbook/7">Сложные слова</a>\n            </div>\n          </div>\n          <div class="textbook__cards"></div>\n          <div class="textbook__pagination-buttons">\n            <a class="textbook__button button_transparent button_start" href="#/textbook/1/1">&lt;&lt;</a>\n            <a class="textbook__button button_transparent button_prev" href="#/textbook/1/1">&lt;</a>\n            <a class="textbook__button button_transparent button_number" onclick="return false;">1</a>\n            <a class="textbook__button button_transparent button_next" href="#/textbook/1/2">&gt;</a>\n            <a class="textbook__button button_transparent button_end" href="#/textbook/1/30">&gt;&gt;</a>\n          </div>\n        </div>'}drawCards(e,t){const s=document.querySelector(".textbook__cards"),n=document.querySelector(".button_difficult");t&&(null==n||n.classList.remove("hide")),s&&e.map((e=>new r.default(s,e,t)))}setPagination(e,t){const s=e+1,n=t+1,o=document.querySelector(".game-card_sprint"),r=document.querySelector(".game-card_audio");if(7===s){const e=document.querySelector(".textbook__pagination-buttons");null==e||e.remove(),o.href=`#/${i.PAGE.PLAYSPRINT}/7`,r.href=`#/${i.PAGE.PLAYAUDIOCALL}/7`}else{const e=document.querySelector(".button_start"),t=document.querySelector(".button_prev"),a=document.querySelector(".button_number"),l=document.querySelector(".button_next"),d=document.querySelector(".button_end");a.textContent=`${n}`,1===n&&(e.classList.add("button_disabled"),t.classList.add("button_disabled")),30===n&&(l.classList.add("button_disabled"),d.classList.add("button_disabled")),e.href=`#/${i.PAGE.TEXTBOOK}/${s}/1`,t.href=`#/${i.PAGE.TEXTBOOK}/${s}/${n-1}`,l.href=`#/${i.PAGE.TEXTBOOK}/${s}/${n+1}`,d.href=`#/${i.PAGE.TEXTBOOK}/${s}/30`,o.href=`#/${i.PAGE.PLAYSPRINT}/${s}/${n}`,r.href=`#/${i.PAGE.PLAYAUDIOCALL}/${s}/${n}`}}changeBcgColor(e){const t=document.getElementById("textbook"),s=a.pageColors[e];t.style.backgroundColor=s}}t.default=l},3303:function(e,t,s){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),(new(n(s(5174)).default)).start()},4896:function(e,t,s){var n=this&&this.__awaiter||function(e,t,s,n){return new(s||(s=Promise))((function(i,o){function r(e){try{l(n.next(e))}catch(e){o(e)}}function a(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof s?t:new s((function(e){e(t)}))).then(r,a)}l((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const i=s(5359),o=s(5296);t.default=class{constructor(){var e,t;this.token=(null===(e=localStorage.getItem("refreshToken"))||void 0===e?void 0:e.slice(1,-1))||"",this.userId=(null===(t=localStorage.getItem("userId"))||void 0===t?void 0:t.slice(1,-1))||"",this.expire=0}request(e){return n(this,void 0,void 0,(function*(){const t={Accept:"application/json"};e.auth&&(Math.floor(Date.now()/1e3)-this.expire>i.FOURHOURS&&(yield this.getNewToken(this.userId,this.token)),t.Authorization=`Bearer ${this.token}`),e.body&&(t["Content-Type"]="application/json");const{method:s}=e,n={headers:t,method:s};e.body&&(n.body=e.body);try{const t=yield fetch(e.url,n);if(204===t.status)return[null,null];if(200===t.status)return[yield t.json(),null];throw new Error(`(${t.status}) ${t.statusText}`)}catch(e){return[null,e]}}))}getWords(e=0,t=0){return n(this,void 0,void 0,(function*(){const s=`${i.URL}words?page=${t}&group=${e}`,n=o.METHOD.GET;return yield this.request({url:s,method:n})}))}getWord(e){return n(this,void 0,void 0,(function*(){const t=`${i.URL}words/${e}`,s=o.METHOD.GET;return yield this.request({url:t,method:s})}))}getUsersWords(){return n(this,void 0,void 0,(function*(){const e=`${i.URL}users/${this.userId}/words`,t=o.METHOD.GET;return yield this.request({url:e,method:t,auth:!0})}))}postUsersWord(e,t){return n(this,void 0,void 0,(function*(){const s=`${i.URL}users/${this.userId}/words/${e}`,n=o.METHOD.POST,r=JSON.stringify(t);return yield this.request({url:s,method:n,auth:!0,body:r})}))}getUsersWordById(e){return n(this,void 0,void 0,(function*(){const t=`${i.URL}users/${this.userId}/words/${e}`,s=o.METHOD.GET;return yield this.request({url:t,method:s,auth:!0})}))}updateUsersWord(e,t){return n(this,void 0,void 0,(function*(){const s=`${i.URL}users/${this.userId}/words/${e}`,n=o.METHOD.PUT,r=JSON.stringify(t);return yield this.request({url:s,method:n,auth:!0,body:r})}))}deleteUsersWord(e){return n(this,void 0,void 0,(function*(){const t=`${i.URL}users/${this.userId}/words/${e}`,s=o.METHOD.DELETE;return yield this.request({url:t,method:s,auth:!0})}))}getUsrAggrWords(e){return n(this,void 0,void 0,(function*(){const{group:t,page:s,wordsPerPage:n,filter:r}=e;let a=`${i.URL}users/${this.userId}/aggregatedWords?wordsPerPage=${n}&filter=${r}`;t&&(a=`${a}&group=${t}`),s&&(a=`${a}&page=${s}`),a=encodeURI(a);const l=o.METHOD.GET;return yield this.request({url:a,method:l,auth:!0})}))}getUsrAggrWordById(e){return n(this,void 0,void 0,(function*(){const t=`${i.URL}users/${this.userId}/aggregatedWords/${e}`,s=o.METHOD.GET;return yield this.request({url:t,method:s,auth:!0})}))}getUsersStats(){return n(this,void 0,void 0,(function*(){const e=`${i.URL}users/${this.userId}/statistics`,t=o.METHOD.GET;return yield this.request({url:e,method:t,auth:!0})}))}updateUsersStats(e){return n(this,void 0,void 0,(function*(){console.log(e);const t=`${i.URL}users/${this.userId}/statistics`,s=o.METHOD.PUT,n=JSON.stringify(e);return yield this.request({url:t,method:s,auth:!0,body:n})}))}getUsersSettings(){return n(this,void 0,void 0,(function*(){const e=`${i.URL}users/${this.userId}/settings`,t=o.METHOD.GET;return yield this.request({url:e,method:t,auth:!0})}))}updateUsersSettings(e){return n(this,void 0,void 0,(function*(){const t=`${i.URL}users/${this.userId}/settings`,s=o.METHOD.PUT,n=JSON.stringify(e);return yield this.request({url:t,method:s,auth:!0,body:n})}))}signin(e,t){return n(this,void 0,void 0,(function*(){const s=`${i.URL}signin`,n=o.METHOD.POST,r=JSON.stringify({email:e,password:t}),a=yield this.request({url:s,method:n,body:r});return a[0]&&(this.setExpire(Date.now()),this.setToken(a[0].token),this.setUserId(a[0].userId)),a}))}setToken(e){this.token=e}setUserId(e){this.userId=e}setExpire(e){this.expire=Math.floor(e/1e3)}getUser(e){return n(this,void 0,void 0,(function*(){try{const{userId:t,token:s}=e,n=yield fetch(`${i.URL}users/${t}`,{method:o.METHOD.GET,headers:{Accept:"application/json",Authorization:`Bearer ${s}`}});return yield n.json()}catch(e){throw new Error(`Error: ${e}`)}}))}createUser(e){return n(this,void 0,void 0,(function*(){const t=`${i.URL}users`,s=o.METHOD.POST,n=JSON.stringify(e);return yield this.request({url:t,method:s,body:n})}))}getNewToken(e,t){return n(this,void 0,void 0,(function*(){try{const s=yield fetch(`${i.URL}users/${e}/tokens`,{method:o.METHOD.GET,headers:{Authorization:`Bearer ${t}`,Accept:"application/json"}}),n=yield s.json();s.ok&&(this.setExpire(Date.now()),this.setToken(n.token)),localStorage.setItem("token",JSON.stringify(n.token)),localStorage.setItem("refreshToken",JSON.stringify(n.refreshToken))}catch(e){throw new Error(`${e}`)}}))}}},5321:function(e,t,s){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=n(s(2095));class o extends i.default{constructor(e,t,s,n){super(e,"button",s,t),n&&(this.elem.disabled=!0)}}t.default=o},5359:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.pageColors=t.FOURHOURS=t.URL=void 0,t.URL="https://rslback.herokuapp.com/",t.FOURHOURS=14400,t.pageColors=["#e7d3ff","#cce0ff","#d3ffe4","#ffffce","#ffe1bb","#fddfe4","#fccdcd"]},6325:function(e,t,s){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=n(s(2095));class o extends i.default{constructor(e,t,s,n){super(e,"img",t),this.elem.src=s,this.elem.alt=n}}t.default=o},2430:function(e,t,s){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=n(s(2095));class o extends i.default{constructor(e,t,s,n){super(e,"a",t),this.elem.href=s,this.elem.textContent=n}}t.default=o},2095:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{constructor(e,t="div",s,n){if(this.elem=document.createElement(t),s){let e=[];/\s/.test(s)&&(e=s.split(" ")),this.elem.classList.add(...e.length?e:[s])}n&&(this.elem.innerHTML=n),e.appendChild(this.elem)}}},8749:function(e,t,s){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=n(s(2095));class o extends i.default{constructor(e,t,s){super(e,"audio",t),this.elem.src=s}run(){this.elem.currentTime=0,this.elem.play()}}t.default=o},3639:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=s(5296);t.default=function(e){switch(e){case n.ICON.SPEAKER:return'\n  <svg version="1.1" class="card__icon" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"\n    viewBox="0 0 496.159 496.159" >\n  <path class="icon--yellow" d="M496.159,248.085c0-137.023-111.07-248.082-248.076-248.082C111.071,0.003,0,111.063,0,248.085\n    c0,137.001,111.07,248.07,248.083,248.07C385.089,496.155,496.159,385.086,496.159,248.085z"/>\n  <g>\n    <path style="fill:#FFFFFF;" d="M247.711,125.252c-3.41-1.851-7.559-1.688-10.813,0.426l-95.137,61.789h-35.164\n      c-5.845,0-10.583,4.738-10.583,10.584v92.727c0,5.845,4.738,10.583,10.583,10.583h35.164l95.137,61.79\n      c1.748,1.135,3.753,1.707,5.765,1.707c1.733,0,3.471-0.425,5.049-1.281c3.41-1.852,5.534-5.421,5.534-9.301V134.553\n      C253.244,130.672,251.121,127.103,247.711,125.252z"/>\n    <path style="fill:#FFFFFF;" d="M282.701,319.271c0.894,0,1.801-0.162,2.685-0.504c24.239-9.412,40.524-38.49,40.524-72.359\n      c0-29.957-13.2-57.049-33.63-69.018c-3.534-2.072-8.08-0.885-10.153,2.65c-2.073,3.536-0.885,8.082,2.651,10.153\n      c15.971,9.358,26.291,31.424,26.291,56.214c0,27.359-12.77,51.424-31.055,58.525c-3.82,1.481-5.714,5.781-4.231,9.602\n      C276.924,317.474,279.729,319.271,282.701,319.271z"/>\n    <path style="fill:#FFFFFF;" d="M302.073,350.217c0.895,0,1.802-0.162,2.684-0.504c34.046-13.219,57.822-55.979,57.822-103.988\n      c0-43.187-18.884-82.156-48.11-99.279c-3.534-2.072-8.082-0.885-10.152,2.652c-2.073,3.535-0.885,8.081,2.651,10.152\n      c24.768,14.512,40.771,48.455,40.771,86.475c0,42.027-19.883,79.1-48.353,90.154c-3.82,1.481-5.715,5.781-4.231,9.602\n      C296.295,348.418,299.1,350.217,302.073,350.217z"/>\n    <path style="fill:#FFFFFF;" d="M322.025,379.715c-3.005,0-5.841-1.818-6.994-4.788c-1.499-3.861,0.416-8.206,4.277-9.706\n      c38.764-15.051,65.837-64.404,65.837-120.019c0-50.136-21.609-95.192-55.052-114.786c-3.574-2.094-4.773-6.688-2.68-10.262\n      c2.094-3.574,6.688-4.774,10.263-2.68c37.948,22.232,62.469,72.369,62.469,127.728c0,61.66-31.009,116.764-75.409,134.002\n      C323.846,379.551,322.928,379.715,322.025,379.715z"/>\n  </g>\n  </svg>';case n.ICON.CLOSE:return'\n  <svg fill="#000000" xmlns="http://www.w3.org/2000/svg"  viewBox="0 0 50 50" width="50px" height="50px"><path d="M 9.15625 6.3125 L 6.3125 9.15625 L 22.15625 25 L 6.21875 40.96875 L 9.03125 43.78125 L 25 27.84375 L 40.9375 43.78125 L 43.78125 40.9375 L 27.84375 25 L 43.6875 9.15625 L 40.84375 6.3125 L 25 22.15625 Z"/></svg>\n  '}return""}},2068:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},3741:(e,t)=>{var s,n,i,o,r,a,l,d,u;Object.defineProperty(t,"__esModule",{value:!0}),t.AUDIOGAME=t.CUSTOMEVENT=t.WINSNEEDED=t.DIFFICULTY=t.ICON=t.METHOD=t.PAGE=t.GAME=t.ANSWER=void 0,function(e){e.WRONG="WRONG",e.RIGHT="RIGHT"}(s||(s={})),t.ANSWER=s,function(e){e.SPRINT="sprint",e.AUDIOCALL="audiocall"}(n||(n={})),t.GAME=n,function(e){e.HOME="home",e.TEXTBOOK="textbook",e.GAMES="games",e.GAMESPRINT="games/sprint",e.GAMEAUDIOCALL="games/audiocall",e.PLAYSPRINT="play/sprint",e.PLAYAUDIOCALL="play/audiocall",e.STATISTIC="statistic"}(i||(i={})),t.PAGE=i,function(e){e.GET="GET",e.POST="POST",e.PATCH="PATCH",e.PUT="PUT",e.DELETE="DELETE"}(o||(o={})),t.METHOD=o,function(e){e.SPEAKER="speaker",e.CLOSE="close"}(r||(r={})),t.ICON=r,function(e){e.GAMESTATISTIC="gameStatistic"}(a||(a={})),t.CUSTOMEVENT=a,function(e){e.NEXTWORD="Next word",e.SHOWANSWER="I don't know",e.SHOWRESULTS="Show results",e[e.AMOUNTOFWORDS=20]="AMOUNTOFWORDS",e[e.AMOUNTOFANSWERS=5]="AMOUNTOFANSWERS",e.ENTER="Enter",e.SPACE=" ",e.STATUSWAITING="waiting",e.STATUSDONE="done"}(l||(l={})),t.AUDIOGAME=l,function(e){e.NONE="none",e.NEW="new",e.HARD="hard",e.LEARN="learn"}(d||(d={})),t.DIFFICULTY=d,function(e){e[e.NEW=3]="NEW",e[e.HARD=5]="HARD"}(u||(u={})),t.WINSNEEDED=u},5296:function(e,t,s){var n=this&&this.__createBinding||(Object.create?function(e,t,s,n){void 0===n&&(n=s);var i=Object.getOwnPropertyDescriptor(t,s);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[s]}}),Object.defineProperty(e,n,i)}:function(e,t,s,n){void 0===n&&(n=s),e[n]=t[s]}),i=this&&this.__exportStar||function(e,t){for(var s in e)"default"===s||Object.prototype.hasOwnProperty.call(t,s)||n(t,e,s)};Object.defineProperty(t,"__esModule",{value:!0}),i(s(4247),t),i(s(6429),t),i(s(1825),t),i(s(3741),t),i(s(2068),t),i(s(5219),t)},6429:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},1825:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},5219:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},4247:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},2108:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var s,n;(0,i.default)(e),"object"===o(t)?(s=t.min||0,n=t.max):(s=arguments[1],n=arguments[2]);var r=encodeURI(e).split(/%..|./).length-1;return r>=s&&(void 0===n||r<=n)};var n,i=(n=s(7774))&&n.__esModule?n:{default:n};function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}e.exports=t.default,e.exports.default=t.default},3761:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if((0,n.default)(e),(t=(0,i.default)(t,d)).require_display_name||t.allow_display_name){var s=e.match(u);if(s){var l=s[1];if(e=e.replace(l,"").replace(/(^<|>$)/g,""),l.endsWith(" ")&&(l=l.substr(0,l.length-1)),!function(e){var t=e.replace(/^"(.+)"$/,"$1");if(!t.trim())return!1;if(/[\.";<>]/.test(t)){if(t===e)return!1;if(t.split('"').length!==t.split('\\"').length)return!1}return!0}(l))return!1}else if(t.require_display_name)return!1}if(!t.ignore_max_length&&e.length>254)return!1;var g=e.split("@"),v=g.pop(),w=v.toLowerCase();if(t.host_blacklist.includes(w))return!1;var p=g.join("@");if(t.domain_specific_validation&&("gmail.com"===w||"googlemail.com"===w)){var b=(p=p.toLowerCase()).split("+")[0];if(!(0,o.default)(b.replace(/\./g,""),{min:6,max:30}))return!1;for(var E=b.split("."),y=0;y<E.length;y++)if(!h.test(E[y]))return!1}if(!(!1!==t.ignore_max_length||(0,o.default)(p,{max:64})&&(0,o.default)(v,{max:254})))return!1;if(!(0,r.default)(v,{require_tld:t.require_tld})){if(!t.allow_ip_domain)return!1;if(!(0,a.default)(v)){if(!v.startsWith("[")||!v.endsWith("]"))return!1;var A=v.substr(1,v.length-2);if(0===A.length||!(0,a.default)(A))return!1}}if('"'===p[0])return p=p.slice(1,p.length-1),t.allow_utf8_local_part?_.test(p):f.test(p);for(var L=t.allow_utf8_local_part?m:c,x=p.split("."),S=0;S<x.length;S++)if(!L.test(x[S]))return!1;return!t.blacklisted_chars||-1===p.search(new RegExp("[".concat(t.blacklisted_chars,"]+"),"g"))};var n=l(s(7774)),i=l(s(5092)),o=l(s(2108)),r=l(s(7244)),a=l(s(1540));function l(e){return e&&e.__esModule?e:{default:e}}var d={allow_display_name:!1,require_display_name:!1,allow_utf8_local_part:!0,require_tld:!0,blacklisted_chars:"",ignore_max_length:!1,host_blacklist:[]},u=/^([^\x00-\x1F\x7F-\x9F\cX]+)</i,c=/^[a-z\d!#\$%&'\*\+\-\/=\?\^_`{\|}~]+$/i,h=/^[a-z\d]+$/,f=/^([\s\x01-\x08\x0b\x0c\x0e-\x1f\x7f\x21\x23-\x5b\x5d-\x7e]|(\\[\x01-\x09\x0b\x0c\x0d-\x7f]))*$/i,m=/^[a-z\d!#\$%&'\*\+\-\/=\?\^_`{\|}~\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+$/i,_=/^([\s\x01-\x08\x0b\x0c\x0e-\x1f\x7f\x21\x23-\x5b\x5d-\x7e\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]|(\\[\x01-\x09\x0b\x0c\x0d-\x7f\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))*$/i;e.exports=t.default,e.exports.default=t.default},7244:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){(0,n.default)(e),(t=(0,i.default)(t,r)).allow_trailing_dot&&"."===e[e.length-1]&&(e=e.substring(0,e.length-1)),!0===t.allow_wildcard&&0===e.indexOf("*.")&&(e=e.substring(2));var s=e.split("."),o=s[s.length-1];if(t.require_tld){if(s.length<2)return!1;if(!/^([a-z\u00A1-\u00A8\u00AA-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]{2,}|xn[a-z0-9-]{2,})$/i.test(o))return!1;if(/\s/.test(o))return!1}return!(!t.allow_numeric_tld&&/^\d+$/.test(o))&&s.every((function(e){return!(e.length>63||!/^[a-z_\u00a1-\uffff0-9-]+$/i.test(e)||/[\uff01-\uff5e]/.test(e)||/^-|-$/.test(e)||!t.allow_underscores&&/_/.test(e))}))};var n=o(s(7774)),i=o(s(5092));function o(e){return e&&e.__esModule?e:{default:e}}var r={require_tld:!0,allow_underscores:!1,allow_trailing_dot:!1,allow_numeric_tld:!1,allow_wildcard:!1};e.exports=t.default,e.exports.default=t.default},1540:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=function e(t){var s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if((0,i.default)(t),!(s=String(s)))return e(t,4)||e(t,6);if("4"===s){if(!a.test(t))return!1;var n=t.split(".").sort((function(e,t){return e-t}));return n[3]<=255}return"6"===s&&!!d.test(t)};var n,i=(n=s(7774))&&n.__esModule?n:{default:n},o="(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])",r="(".concat(o,"[.]){3}").concat(o),a=new RegExp("^".concat(r,"$")),l="(?:[0-9a-fA-F]{1,4})",d=new RegExp("^("+"(?:".concat(l,":){7}(?:").concat(l,"|:)|")+"(?:".concat(l,":){6}(?:").concat(r,"|:").concat(l,"|:)|")+"(?:".concat(l,":){5}(?::").concat(r,"|(:").concat(l,"){1,2}|:)|")+"(?:".concat(l,":){4}(?:(:").concat(l,"){0,1}:").concat(r,"|(:").concat(l,"){1,3}|:)|")+"(?:".concat(l,":){3}(?:(:").concat(l,"){0,2}:").concat(r,"|(:").concat(l,"){1,4}|:)|")+"(?:".concat(l,":){2}(?:(:").concat(l,"){0,3}:").concat(r,"|(:").concat(l,"){1,5}|:)|")+"(?:".concat(l,":){1}(?:(:").concat(l,"){0,4}:").concat(r,"|(:").concat(l,"){1,6}|:)|")+"(?::((?::".concat(l,"){0,5}:").concat(r,"|(?::").concat(l,"){1,7}|:))")+")(%[0-9a-zA-Z-.:]{1,})?$");e.exports=t.default,e.exports.default=t.default},2073:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;(0,i.default)(e);var s=c(e);return(t=(0,n.default)(t||{},u)).returnScore?h(s,t):s.length>=t.minLength&&s.lowercaseCount>=t.minLowercase&&s.uppercaseCount>=t.minUppercase&&s.numberCount>=t.minNumbers&&s.symbolCount>=t.minSymbols};var n=o(s(5092)),i=o(s(7774));function o(e){return e&&e.__esModule?e:{default:e}}var r=/^[A-Z]$/,a=/^[a-z]$/,l=/^[0-9]$/,d=/^[-#!$@%^&*()_+|~=`{}\[\]:";'<>?,.\/ ]$/,u={minLength:8,minLowercase:1,minUppercase:1,minNumbers:1,minSymbols:1,returnScore:!1,pointsPerUnique:1,pointsPerRepeat:.5,pointsForContainingLower:10,pointsForContainingUpper:10,pointsForContainingNumber:10,pointsForContainingSymbol:10};function c(e){var t,s,n=(t=e,s={},Array.from(t).forEach((function(e){s[e]?s[e]+=1:s[e]=1})),s),i={length:e.length,uniqueChars:Object.keys(n).length,uppercaseCount:0,lowercaseCount:0,numberCount:0,symbolCount:0};return Object.keys(n).forEach((function(e){r.test(e)?i.uppercaseCount+=n[e]:a.test(e)?i.lowercaseCount+=n[e]:l.test(e)?i.numberCount+=n[e]:d.test(e)&&(i.symbolCount+=n[e])})),i}function h(e,t){var s=0;return s+=e.uniqueChars*t.pointsPerUnique,s+=(e.length-e.uniqueChars)*t.pointsPerRepeat,e.lowercaseCount>0&&(s+=t.pointsForContainingLower),e.uppercaseCount>0&&(s+=t.pointsForContainingUpper),e.numberCount>0&&(s+=t.pointsForContainingNumber),e.symbolCount>0&&(s+=t.pointsForContainingSymbol),s}e.exports=t.default,e.exports.default=t.default},7774:(e,t)=>{function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){if(!("string"==typeof e||e instanceof String)){var t=s(e);throw null===e?t="null":"object"===t&&(t=e.constructor.name),new TypeError("Expected a string but received a ".concat(t))}},e.exports=t.default,e.exports.default=t.default},5092:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;for(var s in t)void 0===e[s]&&(e[s]=t[s]);return e},e.exports=t.default,e.exports.default=t.default}},t={};function s(n){var i=t[n];if(void 0!==i)return i.exports;var o=t[n]={exports:{}};return e[n].call(o.exports,o,o.exports,s),o.exports}s.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s(3303)})();